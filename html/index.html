<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body class="body">
    <!-- <form method="post" enctype="multipart/form-data" action="http://localhost:5000/img/upload">
        <input type="file" accept=".png,.jpg" name="file">
        <button>Upload PNG or JPG up to 10 MB</button>
    </form> -->
    <img src="http://localhost:5000/img/44158.png" alt="">
    <header>
        <div class="pointer header_btn">
            <img src="./icons/male-icon.svg" alt="" class="header_icon">
            <h5 class="header_btn_text">User</h5>
        </div>
        <div class="pointer header_btn">
            <img src="./icons/pencil-icon.svg" alt="" class="header_icon">
            <h5 class="header_btn_text">My lists</h5>
        </div>
        <div class="pointer header_btn">
            <img src="./icons/door-check-out-icon.svg" alt="" class="header_icon">
            <h5 class="header_btn_text">Sign in</h5>
        </div>
    </header>
    <div class="middle_title">
        <h3>TIERLIST</h3>
    </div>
    <div class="admin_menu">
        <div class="admin_menu_title">
            <h3>ADMIN MENU</h3>
        </div>
        <div class="pointer admin_menu_item">
            <img src="./icons/plus-icon.svg" alt="">
            <h5>New Template</h5>
        </div>
        <div class="pointer admin_menu_item">
            <img src="./icons/male-icon.svg" alt="">
            <h5>Users</h5>
        </div>
    </div>
    <div class="main">
        <div class="basic_list">
            <h3>Templates</h3>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
        </div>
        <div class="basic_list">
            <h3>User lists</h3>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
        </div>
    </div>
    <div class="main">
        <div class="template_action">
            <div>
                <input placeholder="Your Title for your Template" type="text">
            </div>
            <div class="pointer template_btn">
                <img src="./icons/close-square-icon.svg" alt="">
                <h5>Delete</h5>
            </div>
            <div class="pointer template_btn">
                <img src="./icons/plus-icon.svg" alt="">
                <h5>Title Image</h5>
            </div>
            <div class="pointer template_btn">
                <img src="./icons/pencil-icon.svg" alt="">
                <h5>Save</h5>
            </div>
        </div>
        <div class="template_board">
            <h3>Tiers</h3>
            <div class="template_board_tiers">
                <h5 class="drag">Best</h5>
                <h5 class="drag">Good</h5>
                <h5 class="drag">Average</h5>
                <h5 class="drag">Bad</h5>
                <h5 class="drag">Worst</h5>
                <h5 class="drag">Best</h5>
                <h5 class="drag">Good</h5>
                <h5 class="drag">Average</h5>
                <h5 class="drag">Bad</h5>
                <h5 class="drag">Worst</h5>
                <h5 class="drag">Best</h5>
                <h5 class="drag">Good</h5>
                <h5 class="drag">Average</h5>
                <h5 class="drag">Bad</h5>
                <h5 class="drag">Worst</h5>
            </div>
            <img class="tier_plus_icon pointer" src="./icons/plus-icon.svg" alt="">
            <div class="template_board_images" ondrop="">
                <h3>Images</h3>
                <div class="pointer board_img">
                    <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                </div>
                <div class="pointer board_img">
                    <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                </div>
                <div class="pointer board_img">
                    <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                </div>
                <div class="pointer board_img">
                    <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                </div>
                <div class="pointer board_img">
                    <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                </div>
            </div>
            <img class="tier_plus_icon pointer" src="./icons/plus-icon.svg" alt="">
        </div>
    </div>
    <div class="main">
        <div class="tierlist_from_temp">
            <div class="tierlist_action">
                <div>
                    <h3>Template Title -</h3>
                    <input placeholder="Your Title for your Template" type="text">
                </div>
                <div class="pointer template_btn">
                    <img src="./icons/close-square-icon.svg" alt="">
                    <h5>Delete</h5>
                </div>
                <div class="pointer template_btn">
                    <img src="./icons/pencil-icon.svg" alt="">
                    <h5>Save</h5>
                </div>
            </div>
            <div class="tierlist_board template_board">
                <div class="template_board_tiers">
                    <div class="tier_level">
                        <h5>Average</h5>
                        <div class="pointer tier_level_img">
                            <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                        </div>
                    </div>
                    <div class="tier_level">
                        <h5>Average</h5>
                    </div>
                    <div class="tier_level">
                        <h5>Average</h5>
                        <div class="pointer tier_level_img">
                            <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                        </div>
                        <div class="pointer tier_level_img">
                            <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                        </div>
                        <div class="pointer tier_level_img">
                            <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                        </div>
                        <div class="pointer tier_level_img">
                            <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                        </div>
                        <div class="pointer tier_level_img">
                            <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                        </div>
                    </div>
                    <div class="tier_level">
                        <h5>Average</h5>
                        <div class="pointer tier_level_img">
                            <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                        </div>
                        <div class="pointer tier_level_img">
                            <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                        </div>
                        <div class="pointer tier_level_img">
                            <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                        </div>
                    </div>
                    <div class="tier_level">
                        <h5>Average</h5>
                        <div class="pointer tier_level_img">
                            <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                        </div>
                    </div>
                </div>
                <div class="tier_images">
                    <div class="pointer board_img">
                        <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                    </div>
                    <div class="pointer board_img">
                        <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                    </div>
                    <div class="pointer board_img">
                        <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                    </div>
                    <div class="pointer board_img">
                        <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                    </div>
                    <div class="pointer board_img">
                        <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                    </div>
                    <div class="pointer board_img">
                        <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                    </div>
                    <div class="pointer board_img">
                        <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                    </div>
                    <div class="pointer board_img">
                        <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                    </div>
                    <div class="pointer board_img">
                        <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="main">
        <div class="admin_userlist">
            <div class="user_card">
                <img class="user_img" src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                <div class="user_info">
                    <h5>Username</h5>
                    <h5>UserEmail@email.com</h5>
                </div>
                <div class="pointer user_btn">
                    <img src="./icons/pencil-icon.svg" alt="">
                    <h5>Edit User</h5>
                </div>
                <div class="pointer user_btn">
                    <img src="./icons/close-square-icon.svg" alt="">
                    <h5>Delete User</h5>
                </div>
            </div>
            <div class="user_card">
                <img class="user_img" src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                <div class="user_info">
                    <h5>Username</h5>
                    <h5>UserEmail@email.com</h5>
                </div>
                <div class="pointer user_btn">
                    <img src="./icons/pencil-icon.svg" alt="">
                    <h5>Edit User</h5>
                </div>
                <div class="pointer user_btn">
                    <img src="./icons/close-square-icon.svg" alt="">
                    <h5>Delete User</h5>
                </div>
            </div>
            <div class="user_card">
                <img class="user_img" src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                <div class="user_info">
                    <h5>Username</h5>
                    <h5>UserEmail@email.com</h5>
                </div>
                <div class="pointer user_btn">
                    <img src="./icons/pencil-icon.svg" alt="">
                    <h5>Edit User</h5>
                </div>
                <div class="pointer user_btn">
                    <img src="./icons/close-square-icon.svg" alt="">
                    <h5>Delete User</h5>
                </div>
            </div>
            <div class="user_card">
                <img class="user_img" src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                <div class="user_info">
                    <h5>Username</h5>
                    <h5>UserEmail@email.com</h5>
                </div>
                <div class="pointer user_btn">
                    <img src="./icons/pencil-icon.svg" alt="">
                    <h5>Edit User</h5>
                </div>
                <div class="pointer user_btn">
                    <img src="./icons/close-square-icon.svg" alt="">
                    <h5>Delete User</h5>
                </div>
            </div>
            <div class="user_card">
                <img class="user_img" src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                <div class="user_info">
                    <h5>Username</h5>
                    <h5>UserEmail@email.com</h5>
                </div>
                <div class="pointer user_btn">
                    <img src="./icons/pencil-icon.svg" alt="">
                    <h5>Edit User</h5>
                </div>
                <div class="pointer user_btn">
                    <img src="./icons/close-square-icon.svg" alt="">
                    <h5>Delete User</h5>
                </div>
            </div>
            <div class="user_card">
                <img class="user_img" src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                <div class="user_info">
                    <h5>Username</h5>
                    <h5>UserEmail@email.com</h5>
                </div>
                <div class="user_btn">
                    <img src="./icons/pencil-icon.svg" alt="">
                    <h5>Edit User</h5>
                </div>
                <div class="user_btn">
                    <img src="./icons/close-square-icon.svg" alt="">
                    <h5>Delete User</h5>
                </div>
            </div>
        </div>
    </div>
    <div class="main">
        <div class="profile_card">
            <h5 class="profile_title">My Profile</h5>
            <img class="profile_img" src="./icons/male-icon.svg" alt="">
            <div class="profile_info">
                <input placeholder="Admin - Super" type="text">
                <input placeholder="admin@admin.com" type="text">
                <input placeholder="password" type="text">
                <div class="pointer profile_btn">
                    <img src="./icons/pencil-icon.svg" alt="">
                    <h5>Edit</h5>
                </div>
                <div class="pointer profile_btn">
                    <img src="./icons/close-square-icon.svg" alt="">
                    <h5>Delete</h5>
                </div>
            </div>
            <div class="profile_sessions">
                <h5>User Session</h5>
                <div class="session_card">
                    <div class="session_ip">
                        <img src="./icons/monitor-icon.svg" alt="">
                        <h5>192.168.1.1</h5>
                    </div>
                    <div class="session_out">
                        <img class="pointer" src="./icons/door-check-out-icon.svg" alt=""></div>
                </div>
                <div class="session_card">
                    <div class="session_ip">
                        <img src="./icons/monitor-icon.svg" alt="">
                        <h5>192.168.1.1</h5>
                    </div>
                    <div class="session_out">
                        <img class="pointer" src="./icons/door-check-out-icon.svg" alt=""></div>
                </div>
                <div class="session_card">
                    <div class="session_ip">
                        <img src="./icons/monitor-icon.svg" alt="">
                        <h5>192.168.1.1</h5>
                    </div>
                    <div class="session_out">
                        <img class="pointer" src="./icons/door-check-out-icon.svg" alt=""></div>
                </div>
            </div>
        </div>
        <div class="basic_list">
            <h3>Tierlists</h3>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
        </div>
    </div>
    <div class="main">
        <div class="login_card">
            <h3 class="login_title">Register</h3>
            <div class="login_img">
                <img src="./icons/male-icon.svg" alt="">
                <h5 class="pointer">Add Photo</h5>
            </div>
            <div class="login_info">
                <input placeholder="Username" type="text">
                <input placeholder="Email " type="text">
                <input placeholder="Password" type="text">
                <input placeholder="Repeat Password" type="text">
                <h5 class="pointer">Register</h5>
            </div>
        </div>
    </div>
    <footer>
        <img src="./icons/alphabet-c-icon.svg" alt="" class="footer_icon">
        <h5 class="footer_text pointer" href="https://www.instagram.com/nikos.kal_/">Designed & Developed By Nikos.kal_</h5>
    </footer>
    <script>


document.getElementsByTagName("body")[0].style.cursor = "url('./icons/pointer-arrow-icon.svg'), auto";

    var clickable = document.getElementsByClassName("pointer");
    var draggable = document.getElementsByClassName("drag");
    var body_box = document.getElementsByClassName("body");
    var main_box = document.getElementsByClassName("main");
    var temp_board_tiers_box_box = document.getElementsByClassName("template_board_tiers");
    var main_rect = main_box[1].getBoundingClientRect();//##########TOCHANGELAITER
    var body_rect = body_box[0].getBoundingClientRect();
    var tier_box_rect = temp_board_tiers_box_box[0].getBoundingClientRect();




////////////////////////////////////////////// BOUNDING BOX UPDATE WITH SCROLL


document.addEventListener("scroll", (event) => {
    lastKnownScrollPosition = window.scrollY;
    // console.log(lastKnownScrollPosition);
    setTimeout(upd_ELM(), 100);
    });


    // document.addEventListener('mousemove', (elm) => {
    //     console.log(event.clientX+"   CLIENT X");
    //     console.log(event.clientY+"   CLIENT Y");
    // });





var green_val = [];
var red_val = [];
var done_j = 0;
var boundingclient_arr=[];
var dropto=-1;
var dragging_elm = -1;
var top_old='';
var left_old='';
var drop_pos=-1;
var elm_matrix=[];
var init_transf=0;
var dropped_shadow=0;
var tier_level_rows=[];
var svg_insert='';
var id_list=[];
var rebound_arr=0;
var pointer_start_x='';
var pointer_start_y='';
BG_coloring();
eventListenerInit();






////////////////////////////////////////////// COLOR GENERATION
function BG_coloring(){

if ((draggable.length%2)=== 0){
        for(var i = 1; i < ((draggable.length)/2)+1; i++) {
            green_val[i] = 130 * ((1/(draggable.length/2))*i);
        }
        for(var j = (draggable.length/2); j > 0; j--) {
            red_val[j]=130 * ((1/(draggable.length/2))*j);
        }
        
      }else{

        for(var i = 1; i < ((draggable.length)/2)+1; i++) {
            green_val[i] = Math.ceil(130 * ((1/(draggable.length/2))*i));
            // console.log(green_val[i]+" I LOOP "+i);
        }
        for(var j = Math.ceil((draggable.length/2)-1); j > 0; j--) {
            red_val[j]=Math.ceil(130 * ((1/(draggable.length/2))*j));
        }
        green_val[i] = 255 / (draggable.length-1);
        red_val[i]=255 / (draggable.length-1);
      }
///////////////////// COLOR ASSIGNMENT TO BACKGROUND OF TIER LEVELS
for(var i = 0; i < draggable.length; i++) {
    draggable[ i ].style.setProperty("--pseudo-text", `"${i+1}"`);
    
    // if(draggable.length%2===0){
    //     if(i<(draggable.length/2)){
    //             // console.log(i+"TEST TO CSS LOOP 1 "+Math.round(green_val[(draggable.length/2)-i]));
    //             draggable[i].style.setProperty("background-color", `rgb(20,${Math.round(green_val[(draggable.length/2)-i])},20)`);
    //         }else{
    //             // console.log(i+"TEST TO CSS"+Math.round(Math.round(red_val[i-(green_val.length-2)])));
    //             draggable[i].style.setProperty("background-color", `rgb(${Math.round(red_val[i-(green_val.length-2)])},20,20)`);
    //         }
    // }else{
    //     if(i<(draggable.length/2)){
    //             // console.log(i+" TEST TO CSS LOOP 1 "+green_val[Math.floor(draggable.length/2)-(i-1)]);
    //             draggable[i].style.setProperty("background-color", `rgb(20,${green_val[Math.floor(draggable.length/2)-(i-1)]},20)`);
    //         }else{
    //             // console.log(i+" TEST TO CSS "+red_val[i-(green_val.length-3)]);
    //             draggable[i].style.setProperty("background-color", `rgb(${red_val[i-(green_val.length-3)]},20,20)`);
    //         }
    // }
}

}


function eventListenerInit(){
    for(var i = 0; i < draggable.length; i++) {
/////////////////////////////////////////////DRAG

    boundingclient_arr[i] = draggable[i].getBoundingClientRect();

    /////////////////////// TIER LEVEL ROW CALC
    
    if(tier_level_rows.indexOf(boundingclient_arr[i].y)==-1){
        tier_level_rows.push(boundingclient_arr[i].y)
    }

    // console.log(tier_level_rows);



    /////////////////////// TIER EVENT LISTENERS


    draggable[i].addEventListener('mousemove', (elm) => {
        document.getElementsByTagName("body")[0].style.cursor = "url('./icons/cursor-hand-icon.svg'), auto";
        if(dragging_elm>=0){
            move(elm.target,dragging_elm);
            dragoveranim(boundingclient_arr,dragging_elm);
        }

    });
    draggable[i].addEventListener('mousedown', (elm) => {
        document.getElementsByTagName("body")[0].style.cursor = "url('./icons/cursor-hand-grab-icon.svg'), auto";
        elm.target.setAttribute("id", "moving");
        pointer_start_x=event.clientX;
        pointer_start_y=event.clientY;
        // elm.target.style.transform='scale(1.2)';
        elm.target.style.zIndex='2';
        for(var i = 0; i < draggable.length; i++) {
            id_list[i] = draggable[i].getAttribute("id");
        }


        dragging_elm = id_list.findIndex((x) => x === 'moving');

    });
    draggable[i].addEventListener('mouseover', (elm) => {
        document.getElementsByTagName("body")[0].style.cursor = "url('./icons/cursor-hand-icon.svg'), auto";
        elm.target.style.pointerEvents = 'all';

    });
    draggable[i].addEventListener('mouseup', (elm) => {
        document.getElementsByTagName("body")[0].style.cursor = "url('./icons/cursor-hand-icon.svg'), auto";
        elm.target.style.transition = `opacity 0.3s, transform 0.3s, margin 0.3s, left 0.3s`;

        if(drop_pos>=0){
            
        }else{
            elm.target.style.transition = `all 0.3s`;
            // elm.target.style.top =boundingclient_arr[i].y - tier_box_rect.y-main_rect.y-5 +"px";
            // elm.target.style.left =boundingclient_arr[i].x - tier_box_rect.x-main_rect.x+5+"px";
            
            
            var timer = setTimeout(
                function(){

                    elm.target.style.transition = `all 0.3s`;
                    elm.target.style.top ="0px";
                    elm.target.style.left ="0px";
                    elm.target.style.position = `relative`;
                    
                    console.log("wewaEWe");
                },300)
                            


        }
        // if(drop_pos>=0){

        //     console.log(boundingclient_arr[dragging_elm+1].width+10);


        //     if(draggable[dragging_elm]){
        //         draggable[dragging_elm].remove();
        //     }


        //     console.log(draggable[dragging_elm]);
        //     for(var j = 0; j < draggable.length; j++) {
        //         draggable[j].style.left=`0`;
        //     }




        //     var timer = setTimeout(
        //         function(){
                            

        //             // drop();
        //             elm.target.remove();
        //             // upd_ELM();
                    
        //         },300);
            
        // }

        

        elm.target.removeAttribute("id", "moving");

    });
    draggable[i].addEventListener('mouseleave', (elm) => {
        document.getElementsByTagName("body")[0].style.cursor = "url('./icons/pointer-arrow-icon.svg'), auto";
        dragging_elm=-1
        elm.target.removeAttribute("id", "moving");
    });

    draggable[i].addEventListener("dragstart", function(e) {
        document.getElementsByTagName("body")[0].style.cursor = "url('./icons/cursor-hand-grab-icon.svg'), auto";
        var img = document.createElement("img");
        img.src = "";
        e.dataTransfer.setDragImage(img, 0, 0);
    }, false);
};
}

function upd_ELM(){

    document.getElementsByTagName("body")[0].style.cursor = "url('./icons/pointer-arrow-icon.svg'), auto";

    clickable = document.getElementsByClassName("pointer");
    draggable = document.getElementsByClassName("drag");

    body_box = document.getElementsByClassName("body");
    main_box = document.getElementsByClassName("main");
    temp_board_tiers_box_box = document.getElementsByClassName("template_board");
    main_rect = main_box[1].getBoundingClientRect();//##########TOCHANGELAITER
    body_rect = body_box[0].getBoundingClientRect();
    tier_box_rect = temp_board_tiers_box_box[0].getBoundingClientRect();


    green_val = [];
    red_val = [];
    done_j = 0;
    boundingclient_arr=[];
    dropto=-1;
    dragging_elm = -1;
    top_old='';
    left_old='';
    drop_pos=-1;
    elm_matrix=[];
    init_transf=0;
    dropped_shadow=0;
    tier_level_rows=[];
    svg_insert='';
    id_list=[];
    rebound_arr=0;

   

    for(var i = 0; i < draggable.length; i++) {
        boundingclient_arr[i] = draggable[i].getBoundingClientRect();
        draggable[i].style.zIndex='0';
        draggable[i].style.transform='scale(1)';
        draggable[i].style.pointerEvents = 'stroke';   
    }

    BG_coloring();
    eventListenerInit();
}

function move(element,i) {

    if(document.getElementById('moving')){
        element.style.transition = `all 0s`;
        element.style.position = `absolute`;
        // element.style.top =boundingclient_arr[i].y - tier_box_rect.y-5 +"px";
        // element.style.left =boundingclient_arr[i].x - tier_box_rect.x+5  +"px";
        document.getElementsByTagName("body")[0].style.cursor = "url('./icons/cursor-hand-grab-icon.svg'), auto";
        element.style.top =boundingclient_arr[i].y - tier_box_rect.y-5 +(event.clientY-pointer_start_y) +"px";
        element.style.left =boundingclient_arr[i].x - tier_box_rect.x+5 +(event.clientX-pointer_start_x) +"px";

        console.log(main_rect);
        console.log(tier_box_rect);
        console.log(boundingclient_arr[i-1]);
        console.log(element.style.left)
    }

}

function dragoveranim(bounding_arr,i){


    
    for(var j = 0; j < draggable.length; j++) {
        if(j>i){
            bounding_arr[j+1] = draggable[j].getBoundingClientRect();
            
        }else if(i==j){

        }else{
            bounding_arr[j] = draggable[j].getBoundingClientRect();
        }
    }

// console.log(bounding_arr[i])

for(var j = 0; j < draggable.length+1; j++) {
    if((event.clientY<bounding_arr[j].top+bounding_arr[j].height) && event.clientY>bounding_arr[j].top){
        if(bounding_arr[j+1].x<event.clientX - (bounding_arr[i].width/2) && bounding_arr[j]!=bounding_arr[i]){
                draggable[j].style.setProperty("background-color","blue");


        }else if(bounding_arr[j+1].x>event.clientX - (bounding_arr[i].width/2) && bounding_arr[j]!=bounding_arr[i]){
                draggable[j].style.setProperty("background-color","green");

        }else{

        }
    }else{
        // draggable[j-1].style.setProperty("background-color","red");
    }
}
// if(!init_transf){
//     console.log(bounding_arr[i]);
//     init_transf=bounding_arr[i].width/2;
//     for(var j = 0; j < draggable.length; j++) {
//         if((event.clientY<bounding_arr[j].top+bounding_arr[j].height) && event.clientY>bounding_arr[j].top){
//             if(bounding_arr[j].x>event.clientX - (bounding_arr[i].width/2) && bounding_arr[j]!=bounding_arr[i]){
//                 draggable[j].style.left=`${init_transf}px`;
//                 elm_matrix[j]=`-${init_transf}`;
//             }else if(bounding_arr[j].x<event.clientX - (bounding_arr[i].width/2) && bounding_arr[j]!=bounding_arr[i]){
//                 draggable[j].style.left=`-${init_transf}px`;
//                 elm_matrix[j]=`${init_transf}`;
//             }else{
//                 elm_matrix[j]=0;
//             }
//         }else{
//             elm_matrix[j]=0;
//         }
//     }    

// }


//     for(var j = 0; j < draggable.length; j++) {
//         if((event.clientY<bounding_arr[j].top+bounding_arr[j].height) && event.clientY>bounding_arr[j].top){
//             if(bounding_arr[j].x>event.clientX - (bounding_arr[i].width/2) && bounding_arr[j]!=bounding_arr[i]){
//                 if(dropto==-1){
//                     dropto=j-1;
//                 }
//                 // draggable[j].style.left=`${Math.ceil(elm_matrix[j])+20}px`;
//                 draggable[j].style.left=`20px`;
//             }else if(bounding_arr[j].x<event.clientX - (bounding_arr[i].width/2) && bounding_arr[j]!=bounding_arr[i]){
//                 if(j<i){
//                         dropto=j+1;
//                     }else{                        
//                         dropto=j;
//                     }
//                 draggable[j].style.left=`-20px`;
//                 // draggable[j].style.left=`${Math.ceil(elm_matrix[j])-20}px`;
//             }else{
//                 if(j==0){dropto=j}
//             }
            
//             draggable[i].style.transform='scale(0.9)';
//         }else{
//                 if(j<i){
//                     // draggable[j].style.left=`${elm_matrix[j]}px`;
//                 }else if(j>i){
//                     // draggable[j].style.left=`${elm_matrix[j]}px`;
//                 }else{
                    
//                 }
            
//             }
        
//     }
//     drop_pos = dropto;
//     dropto=-1;
//     console.log(drop_pos);

}

function drop(draggable,dragging_elm){
    if(drop_pos!=-1){
        if(draggable[dragging_elm]){
            draggable[dragging_elm].remove();
        }


        // console.log(draggable[dragging_elm]);
        for(var j = 0; j < draggable.length; j++) {
            draggable[j].style.left=`0`;
        }
    }

}
//  ##############################HOVER

 for(var i = 0; i < clickable.length; i++) {
    clickable[i].addEventListener('mouseover', () => {
    document.getElementsByTagName("body")[0].style.cursor = "url('./icons/cursor-hand-icon.svg'), auto";
  });
  clickable[i].addEventListener('mouseleave', () => {
    document.getElementsByTagName("body")[0].style.cursor = "url('./icons/pointer-arrow-icon.svg'), auto";
  });
};


    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">

</head>
<body class="body">
    <!-- <form method="post" enctype="multipart/form-data" action="http://localhost:5000/img/upload">
        <input type="file" accept=".png,.jpg" name="file">
        <button>Upload PNG or JPG up to 10 MB</button>
    </form> -->
    <img src="http://localhost:5000/img/44158.png" alt="">
    <header>
        <div class="pointer header_btn">
            <img src="./icons/male-icon.svg" alt="" class="header_icon">
            <h5 class="header_btn_text">User</h5>
        </div>
        <div class="pointer header_btn">
            <img src="./icons/pencil-icon.svg" alt="" class="header_icon">
            <h5 class="header_btn_text">My lists</h5>
        </div>
        <div class="pointer header_btn">
            <img src="./icons/door-check-out-icon.svg" alt="" class="header_icon">
            <h5 class="header_btn_text">Sign in</h5>
        </div>
    </header>
    <div class="middle_title">
        <h3>TIERLIST</h3>
    </div>
    <div class="admin_menu">
        <div class="admin_menu_title">
            <h3>ADMIN MENU</h3>
        </div>
        <div class="pointer admin_menu_item">
            <img src="./icons/plus-icon.svg" alt="">
            <h5>New Template</h5>
        </div>
        <div class="pointer admin_menu_item">
            <img src="./icons/male-icon.svg" alt="">
            <h5>Users</h5>
        </div>
    </div>
    <div class="main">
        <div class="basic_list">
            <h3>Templates</h3>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
        </div>
        <div class="basic_list">
            <h3>User lists</h3>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
            <div class="pointer list_item">
                <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="" class="list_item_img">
                <h5 class="list_item_title">Test Item</h5>
            </div>
        </div>
    </div>
    <div class="main">
        <div class="template_action">
            <h3>Template Title</h3>
            <div class="pointer template_btn">
                <img src="./icons/close-square-icon.svg" alt="">
                <h5>Delete</h5>
            </div>
            <div class="pointer template_btn">
                <img src="./icons/plus-icon.svg" alt="">
                <h5>Title Image</h5>
            </div>
            <div class="pointer template_btn">
                <img src="./icons/pencil-icon.svg" alt="">
                <h5>Save</h5>
            </div>
        </div>
        <div class="template_board">
            <h3>Tiers</h3>
            <div class="template_board_tiers" ondrop="" ondragover="allowDrop(this)">
                <h5 draggable="true" ondrag="move(this,0)" class="drag">Best</h5>
                <h5 draggable="true" ondrag="move(this,1)" class="drag">Good</h5>
                <h5 draggable="true" ondrag="move(this,2)" class="drag">Average</h5>
                <h5 draggable="true" ondrag="move(this,3)" class="drag">Bad</h5>
                <h5 draggable="true" ondrag="move(this,4)" class="drag">Worst</h5>
                <h5 draggable="true" ondrag="move(this,0)" class="drag">Best</h5>
                <h5 draggable="true" ondrag="move(this,1)" class="drag">Good</h5>
                <h5 draggable="true" ondrag="move(this,2)" class="drag">Average</h5>
                <h5 draggable="true" ondrag="move(this,3)" class="drag">Bad</h5>
                <h5 draggable="true" ondrag="move(this,4)" class="drag">Worst</h5>
                <h5 draggable="true" ondrag="move(this,0)" class="drag">Best</h5>
                <h5 draggable="true" ondrag="move(this,1)" class="drag">Good</h5>
                <h5 draggable="true" ondrag="move(this,2)" class="drag">Average</h5>
                <h5 draggable="true" ondrag="move(this,3)" class="drag">Bad</h5>
                <h5 draggable="true" ondrag="move(this,4)" class="drag">Worst</h5>
            </div>
            <img class="tier_plus_icon pointer" src="./icons/plus-icon.svg" alt="">
            <h3>Images</h3>
            <div class="template_board_images" ondrop="">
                <div class="pointer board_img">
                    <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                </div>
                <div class="pointer board_img">
                    <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                </div>
                <div class="pointer board_img">
                    <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                </div>
                <div class="pointer board_img">
                    <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                </div>
                <div class="pointer board_img">
                    <img src="./imgs/c2c9362d-eb52-47ce-a0df-ae58b0e40ae3.png" alt="">
                </div>
            </div>
            <img class="tier_plus_icon pointer" src="./icons/plus-icon.svg" alt="">
        </div>
    </div>
    <footer>
        <img src="./icons/alphabet-c-icon.svg" alt="" class="footer_icon">
        <h5 class="footer_text pointer" href="https://www.instagram.com/nikos.kal_/">Designed & Developed By Nikos.kal_</h5>
    </footer>
    <script>

document.getElementsByTagName("body")[0].style.cursor = "url('./icons/pointer-arrow-icon.svg'), auto";

 var clickable = document.getElementsByClassName("pointer");
 var draggable = document.getElementsByClassName("drag");
 
    const body_box = document.getElementsByClassName("body");
    const main_box = document.getElementsByClassName("main");
    const temp_board_tiers_box_box = document.getElementsByClassName("template_board_tiers");
    var main_rect = main_box[1].getBoundingClientRect();//##########TOCHANGELAITER
    var body_rect = body_box[0].getBoundingClientRect();
    var tier_box_rect = temp_board_tiers_box_box[0].getBoundingClientRect();


var boundingclient = [];
var green_val = [];
var red_val = [];
var done_j = 0;

////////////////////////////////////////////// COLOR GENERATION

    if ((draggable.length%2)=== 0){
            for(var i = 1; i < ((draggable.length)/2)+1; i++) {
                green_val[i] = 130 * ((1/(draggable.length/2))*i);
            }
            for(var j = (draggable.length/2); j > 0; j--) {
                red_val[j]=130 * ((1/(draggable.length/2))*j);
            }
            
          }else{

            for(var i = 1; i < ((draggable.length)/2)+1; i++) {
                green_val[i] = Math.ceil(130 * ((1/(draggable.length/2))*i));
                console.log(green_val[i]+" I LOOP "+i);
            }
            for(var j = Math.ceil((draggable.length/2)-1); j > 0; j--) {
                red_val[j]=Math.ceil(130 * ((1/(draggable.length/2))*j));
            }
            green_val[i] = 255 / (draggable.length-1);
            red_val[i]=255 / (draggable.length-1);
          }

////////////////////////////////////////////// COLOR ASSIGNMENT TO BACKGROUND OF TIER LEVELS

for(var i = 0; i < draggable.length; i++) {

    draggable[ i ].style.setProperty("--pseudo-text", `"${i+1}"`);
    
    if(draggable.length%2===0){
        if(i<(draggable.length/2)){
                // console.log(i+"TEST TO CSS LOOP 1 "+Math.round(green_val[(draggable.length/2)-i]));
                draggable[i].style.setProperty("background-color", `rgb(20,${Math.round(green_val[(draggable.length/2)-i])},20)`);
            }else{
                // console.log(i+"TEST TO CSS"+Math.round(Math.round(red_val[i-(green_val.length-2)])));
                draggable[i].style.setProperty("background-color", `rgb(${Math.round(red_val[i-(green_val.length-2)])},20,20)`);
            }
    }else{
        if(i<(draggable.length/2)){
                // console.log(i+" TEST TO CSS LOOP 1 "+green_val[Math.floor(draggable.length/2)-(i-1)]);
                draggable[i].style.setProperty("background-color", `rgb(20,${green_val[Math.floor(draggable.length/2)-(i-1)]},20)`);
            }else{
                // console.log(i+" TEST TO CSS "+red_val[i-(green_val.length-3)]);
                draggable[i].style.setProperty("background-color", `rgb(${red_val[i-(green_val.length-3)]},20,20)`);
            }
    }

          

/////////////////////////////////////////////DRAG


    boundingclient.push(draggable[i].getBoundingClientRect());

    draggable[i].addEventListener('mouseover', () => {
        document.getElementsByTagName("body")[0].style.cursor = "url('./icons/cursor-hand-icon.svg'), auto";
    });
    draggable[i].addEventListener('mousedown', () => {
        document.getElementsByTagName("body")[0].style.cursor = "url('./icons/cursor-hand-grab-icon.svg'), auto";
    });
    draggable[i].addEventListener('mouseup', () => {
        document.getElementsByTagName("body")[0].style.cursor = "url('./icons/cursor-hand-icon.svg'), auto";
    });
    draggable[i].addEventListener('mouseleave', () => {
        document.getElementsByTagName("body")[0].style.cursor = "url('./icons/pointer-arrow-icon.svg'), auto";
    });
    draggable[i].addEventListener("dragstart", function(e) {
    var img = document.createElement("img");
    img.src = "";
    e.dataTransfer.setDragImage(img, 0, 0);
    document.body.style.cursor = 'none';
}, false);
};


function move(element,i) {

        element.style.top = event.clientY -boundingclient[i].y -(boundingclient[i].height/2) +"px";
        element.style.left =event.clientX -boundingclient[i].x - (tier_box_rect.x - main_rect.x) +"px";
}
function allowDrop(element) {
    event.preventDefault();
}
function drop(element){
    event.preventDefault();
    var data = event.dataTransfer.getData("text");
    event.target.appendChild(document.getElementById(data));
}

//  ##############################HOVER

 for(var i = 0; i < clickable.length; i++) {
    clickable[i].addEventListener('mouseover', () => {
    document.getElementsByTagName("body")[0].style.cursor = "url('./icons/cursor-hand-icon.svg'), auto";
  });
  clickable[i].addEventListener('mouseleave', () => {
    document.getElementsByTagName("body")[0].style.cursor = "url('./icons/pointer-arrow-icon.svg'), auto";
  });
};


    </script>
</body>
</html>